# Telegram Bot –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞—è–≤–∫–∞—Ö

–≠—Ç–æ—Ç –±–æ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö —Å —Å–∞–π—Ç–∞ "–ö—É–ª—å—Ç—É—Ä–∞ –ú–µ—Ç—Ä–æ–≤" —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `/start`.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```bash
npm run server:test
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook URL –≤ –∫–æ–Ω—Ñ–∏–≥–µ server/config/telegram.ts
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: http://localhost:3001/telegram/webhook
# –î–ª—è production: https://your-domain.com/telegram/webhook

npm run bot:setup
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# Production
npm run telegram-server

# Development (—Å autoreload)
npm run telegram-server:dev
```

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
- `/start` - –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞—è–≤–∫–∞—Ö
- `/stop` - –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram –Ω–∞—Ö–æ–¥—è—Ç –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –∏ –ø–∏—à—É—Ç `/start`
2. **–ü–æ–¥–ø–∏—Å–∫–∞**: –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö chat ID –≤ —Ñ–∞–π–ª `subscribers.json`
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –ö–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞, –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Å–µ–º –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º
4. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã**: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã (—É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ `adminChatIds`) –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `src/config/telegram.ts`:

```typescript
export const TELEGRAM_CONFIG = {
  botToken: 'YOUR_BOT_TOKEN', // –ü–æ–ª—É—á–∏—Ç—å —É @BotFather
  adminChatIds: ['ADMIN_CHAT_ID'], // –í–∞—à –ª–∏—á–Ω—ã–π chat ID
  webhook: {
    url: 'https://your-domain.com/telegram/webhook', // –í–∞—à –¥–æ–º–µ–Ω
    port: 3001
  }
};
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ bot token
1. –ù–∞–ø–∏—à–∏—Ç–µ @BotFather –≤ Telegram
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/newbot`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ token

### –ü–æ–ª—É—á–µ–Ω–∏–µ chat ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
1. –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É @userinfobot
2. –û–Ω –ø–æ–∫–∞–∂–µ—Ç –≤–∞—à chat ID
3. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ `adminChatIds`

## üõ†Ô∏è –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Production —Å–µ—Ä–≤–µ—Ä
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export TELEGRAM_WEBHOOK_URL=https://your-domain.com/telegram/webhook
export PORT=3001

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm run telegram-server
```

### Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
EXPOSE 3001
CMD ["npm", "run", "telegram-server"]
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–æ–º–∞–Ω–¥–æ–π `/stats` –≤ –±–æ—Ç–µ.

### –õ–æ–≥–∏
–°–µ—Ä–≤–µ—Ä –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å:
- –ù–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
- –û—Ç–ø–∏—Å–∫–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –û—à–∏–±–∫–∏

## üîß API Endpoints

### Webhook
```
POST /telegram/webhook
```
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç Telegram Bot API.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ webhook
```
POST /webhook/set
POST /webhook/delete
```

### Health check
```
GET /health
```

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/                    # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ (React)
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ telegram.ts          # –¢–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ telegram.ts          # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
‚îî‚îÄ‚îÄ components/              # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

server/                 # –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥ (Node.js)
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ telegram.ts          # –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å —Ç–æ–∫–µ–Ω–æ–º
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ bot-handler.ts       # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ subscribers.ts       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º–∏
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ setup-bot.js         # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook
‚îî‚îÄ‚îÄ telegram-server.js       # HTTP —Å–µ—Ä–≤–µ—Ä –¥–ª—è webhook

subscribers.json         # –ë–∞–∑–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Webhook URL** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –¥–ª—è Telegram API
2. **Bot token** —Ö—Ä–∞–Ω–∏—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ production
3. **Subscribers.json** —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ - –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ git
4. **HTTPS** –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è webhook –≤ production

## üîç Troubleshooting

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å URL: `curl https://your-domain.com/telegram/webhook`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ bot token
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook –∫–æ–º–∞–Ω–¥–æ–π `/webhookinfo` —É @BotFather

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –æ–Ω–∏ –Ω–∞–ø–∏—Å–∞–ª–∏ `/start`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `subscribers.json`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook —á–µ—Ä–µ–∑ @BotFather
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã